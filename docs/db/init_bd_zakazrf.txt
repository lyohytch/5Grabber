CREATE TABLE IF NOT EXISTS Reduction(
    id_reduction_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT UNIQUE,
    id_reduction MEDIUMINT UNSIGNED NOT NULL,
    id_customer MEDIUMINT UNSIGNED NOT NULL,
    string_number CHAR(20) NOT NULL,
    date_registration DATETIME,
    PRIMARY KEY (id_reduction_auto)
);

CREATE TABLE IF NOT EXISTS Lot (
    id_lot_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT UNIQUE,
    id_reduction_auto MEDIUMINT UNSIGNED NOT NULL,
    id_status_auto MEDIUMINT UNSIGNED NOT NULL,
    id_lot MEDIUMINT UNSIGNED,
    num_lot SMALLINT UNSIGNED NOT NULL,
    status SMALLINT UNSIGNED NOT NULL,
    subject VARCHAR(1000),  
    obespechenie FLOAT,
    start_price FLOAT NOT NULL,
    best_price FLOAT,
    start_time DATETIME,
    protocol VARCHAR(200),
    PRIMARY KEY (id_lot_auto, id_reduction_auto)
);

CREATE TABLE IF NOT EXISTS Customer (
    id_customer_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT UNIQUE,
    id_customer MEDIUMINT UNSIGNED NOT NULL UNIQUE,
    name VARCHAR(300),
    adress VARCHAR(400),
    post_adress VARCHAR(400),
    email VARCHAR(100),
    telephone VARCHAR(100),
    PRIMARY KEY (id_customer_auto)
);

CREATE TABLE IF NOT EXISTS Party (
    id_party_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT UNIQUE,
    id_lot_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE,
    id_participant_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE,
    PRIMARY_KEY (id_party_auto)
);

CREATE TABLE IF NOT EXISTS Participant (
    id_participant_auto MEDIUMINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT UNIQUE,
    name VARCHAR(300),
    inn CHAR(30),
    kpp CHAR(30),
    PRIMARY KEY (id_participant_auto)
);

CREATE TABLE IF NOT EXISTS Status (
    id_status_auto SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE,
    status CHAR(30),
    PRIMARY KEY (id_status)
);

CREATE TABLE IF NOT EXISTS DocFile (
    id_file MEDIUMINT UNSIGNED NOT NULL UNIQUE AUTO_INCREMENT,
    id_reduction MEDIUMINT UNSIGNED NOT NULL,
    name VARCHAR(256),
    url VARCHAR(300),
    uploaded DATETIME,
    last_parsed DATETIME,
    info VARCHAR(5000),
    PRIMARY KEY (id_file)
);
